[gd_scene load_steps=44 format=3 uid="uid://cwodfkujwqslt"]

[ext_resource type="Script" uid="uid://by5aqcgr1kpan" path="res://main.gd" id="1_2cqfq"]
[ext_resource type="Script" uid="uid://3ku4bjr4wnxs" path="res://player_move.gd" id="1_ig7tw"]
[ext_resource type="Texture2D" uid="uid://bgw6ieycalrno" path="res://bg.png" id="1_lquwl"]
[ext_resource type="Texture2D" uid="uid://dxe1l12ahqtbh" path="res://bg2.png" id="2_efxa6"]
[ext_resource type="Script" uid="uid://de3pfrtwagvho" path="res://ball.gd" id="3_h2yge"]
[ext_resource type="Script" uid="uid://b8im5v3msydjw" path="res://wall.gd" id="4_7mycd"]
[ext_resource type="Texture2D" uid="uid://c38qdat7oqjlk" path="res://player-Sheet_2.png" id="4_ycdy4"]
[ext_resource type="Texture2D" uid="uid://ce85j6wyh14y3" path="res://player-Sheet.png" id="5_kek77"]
[ext_resource type="Texture2D" uid="uid://chsvas6refatf" path="res://rays.png" id="6_4c57u"]
[ext_resource type="Texture2D" uid="uid://b2tjoquyswty3" path="res://grass.png" id="7_272bh"]
[ext_resource type="Texture2D" uid="uid://cqpwad8jh7ywk" path="res://player-Sheet_highlight.png" id="7_dg77c"]
[ext_resource type="Texture2D" uid="uid://bu2k4qc3hek5w" path="res://Sprite-0001.png" id="8_5vw27"]
[ext_resource type="Texture2D" uid="uid://b4oyojb7k3wrc" path="res://ball.png" id="9_4c57u"]
[ext_resource type="Texture2D" uid="uid://pioxxt8stehq" path="res://frame.png" id="9_kek77"]
[ext_resource type="Script" uid="uid://byrnvgecevajx" path="res://camera_2d.gd" id="12_82xsv"]
[ext_resource type="Texture2D" uid="uid://b1601jnx56k7u" path="res://shadow.png" id="12_vivmo"]
[ext_resource type="Script" uid="uid://cbcdxs2x30p75" path="res://bounds_p_1.gd" id="17_074og"]
[ext_resource type="Script" uid="uid://dhisncb0eij3l" path="res://game.gd" id="18_cegan"]
[ext_resource type="Script" uid="uid://doehsipsudiie" path="res://lbl_p_2_score.gd" id="20_82xsv"]
[ext_resource type="Script" uid="uid://2empcoiuuihp" path="res://lbl_p_1_score.gd" id="20_getpj"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h2yge"]
size = Vector2(28, 46.57994)

[sub_resource type="AtlasTexture" id="AtlasTexture_cegan"]
atlas = ExtResource("4_ycdy4")
region = Rect2(0, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_82xsv"]
atlas = ExtResource("4_ycdy4")
region = Rect2(10, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_getpj"]
atlas = ExtResource("4_ycdy4")
region = Rect2(20, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_ryguw"]
atlas = ExtResource("4_ycdy4")
region = Rect2(30, 0, 10, 13)

[sub_resource type="SpriteFrames" id="SpriteFrames_d13ii"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_cegan")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_82xsv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_getpj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ryguw")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_cegan")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ryguw")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_getpj")
}],
"loop": true,
"name": &"right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_82xsv")
}],
"loop": true,
"name": &"vert",
"speed": 5.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_kek77"]
atlas = ExtResource("5_kek77")
region = Rect2(0, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_4c57u"]
atlas = ExtResource("5_kek77")
region = Rect2(10, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_efxa6"]
atlas = ExtResource("5_kek77")
region = Rect2(20, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_dg77c"]
atlas = ExtResource("5_kek77")
region = Rect2(10, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_ycdy4"]
atlas = ExtResource("7_dg77c")
region = Rect2(0, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_w48qg"]
atlas = ExtResource("7_dg77c")
region = Rect2(10, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_vivmo"]
atlas = ExtResource("7_dg77c")
region = Rect2(20, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_2cqfq"]
atlas = ExtResource("7_dg77c")
region = Rect2(30, 0, 10, 13)

[sub_resource type="SpriteFrames" id="SpriteFrames_ycdy4"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kek77")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4c57u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_efxa6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dg77c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ycdy4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w48qg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vivmo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2cqfq")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_ycdy4")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2cqfq")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_vivmo")
}],
"loop": true,
"name": &"right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_w48qg")
}],
"loop": true,
"name": &"vert",
"speed": 5.0
}]

[sub_resource type="AtlasTexture" id="AtlasTexture_yaehf"]
atlas = ExtResource("5_kek77")
region = Rect2(30, 0, 10, 13)

[sub_resource type="AtlasTexture" id="AtlasTexture_074og"]
atlas = ExtResource("5_kek77")
region = Rect2(20, 0, 10, 13)

[sub_resource type="SpriteFrames" id="SpriteFrames_dg77c"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kek77")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4c57u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_dg77c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ycdy4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w48qg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vivmo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2cqfq")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yaehf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_074og")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_kek77")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yaehf")
}],
"loop": true,
"name": &"left",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_074og")
}],
"loop": true,
"name": &"right",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_4c57u")
}],
"loop": true,
"name": &"vert",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0xm2m"]
size = Vector2(50.093567, 231.96927)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_0xm2m"]
distance = 153.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_efxa6"]
size = Vector2(26.5, 388)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_lquwl"]
size = Vector2(1153, 9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vivmo"]
size = Vector2(84.33621, 158.41492)

[node name="Node2D" type="Node2D"]
script = ExtResource("1_2cqfq")

[node name="CanvasGroup" type="CanvasGroup" parent="."]
scale = Vector2(0.99999994, 0.99999994)

[node name="px_bg" type="Parallax2D" parent="CanvasGroup"]
scroll_scale = Vector2(0.7, 0.7)
scroll_offset = Vector2(-160.00002, -69)

[node name="cavewall" type="Sprite2D" parent="CanvasGroup/px_bg"]
texture_filter = 1
position = Vector2(285.00003, 106)
scale = Vector2(5, 5)
texture = ExtResource("1_lquwl")
region_enabled = true
region_rect = Rect2(-138.85541, -30.495407, 465.1321, 127.0405)

[node name="px_ground2" type="Parallax2D" parent="CanvasGroup"]
scroll_scale = Vector2(0.8, 0.8)
scroll_offset = Vector2(-161.00002, -12)

[node name="bg2" type="Sprite2D" parent="CanvasGroup/px_ground2"]
texture_filter = 1
texture_repeat = 2
position = Vector2(-678, 11)
scale = Vector2(5, 5)
texture = ExtResource("2_efxa6")
centered = false
region_enabled = true
region_rect = Rect2(-91.044464, 33.02484, 338.0916, 30.975159)

[node name="px_rays" type="Parallax2D" parent="CanvasGroup"]
scroll_offset = Vector2(-160.00002, -71)

[node name="rays" type="Sprite2D" parent="CanvasGroup/px_rays"]
modulate = Color(1, 1, 1, 0.4627451)
texture_filter = 1
texture_repeat = 2
position = Vector2(-692, -79)
scale = Vector2(5, 5)
texture = ExtResource("6_4c57u")
centered = false
region_enabled = true
region_rect = Rect2(-91.044464, 0.24020386, 338.0916, 63.759796)

[node name="px_ground" type="Parallax2D" parent="CanvasGroup"]
z_index = 2
scroll_offset = Vector2(-160.00002, -69)

[node name="grass" type="Sprite2D" parent="CanvasGroup/px_ground"]
texture_filter = 1
texture_repeat = 2
position = Vector2(-672, 113)
scale = Vector2(5, 5)
texture = ExtResource("7_272bh")
centered = false
region_enabled = true
region_rect = Rect2(-91.044464, 44.12648, 338.0916, 19.87352)

[node name="px_ground3" type="Parallax2D" parent="CanvasGroup"]
z_index = 2
scroll_offset = Vector2(-99.000015, 63)

[node name="bg2" type="Sprite2D" parent="CanvasGroup/px_ground3"]
texture_filter = 1
texture_repeat = 2
position = Vector2(-728, -69.99999)
scale = Vector2(5, 5)
texture = ExtResource("12_vivmo")
centered = false
region_enabled = true
region_rect = Rect2(-91.044464, 33.02484, 338.0916, 30.975159)

[node name="px_foreground" type="Parallax2D" parent="CanvasGroup"]
z_index = 3
scroll_scale = Vector2(0.9, 0.9)
scroll_offset = Vector2(-160.00002, -69)

[node name="cave" type="Sprite2D" parent="CanvasGroup/px_foreground"]
texture_filter = 1
position = Vector2(165, 67.00001)
scale = Vector2(5, 5)
texture = ExtResource("8_5vw27")

[node name="player2" type="CharacterBody2D" parent="."]
z_index = 1
position = Vector2(459, 351)
motion_mode = 1
script = ExtResource("1_ig7tw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="player2"]
position = Vector2(-240, -376.96045)
scale = Vector2(1, 0.9429144)
shape = SubResource("RectangleShape2D_h2yge")

[node name="snail_anim" type="AnimatedSprite2D" parent="player2"]
texture_filter = 1
position = Vector2(-242, -377)
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_d13ii")
flip_h = true

[node name="snail_anim_highlight" type="AnimatedSprite2D" parent="player2"]
modulate = Color(1, 1, 1, 0.3254902)
texture_filter = 1
position = Vector2(-242, -377)
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_ycdy4")
animation = &"idle"
flip_h = true

[node name="player" type="CharacterBody2D" parent="."]
z_index = 1
position = Vector2(3.9999847, 360)
motion_mode = 1
script = ExtResource("1_ig7tw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="player"]
position = Vector2(-243.99998, -377.1875)
shape = SubResource("RectangleShape2D_h2yge")

[node name="snail_anim" type="AnimatedSprite2D" parent="player"]
texture_filter = 1
position = Vector2(-242, -377)
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_dg77c")
animation = &"idle"

[node name="snail_anim_highlight" type="AnimatedSprite2D" parent="player"]
modulate = Color(1, 1, 1, 0.3254902)
texture_filter = 1
position = Vector2(-242, -377)
scale = Vector2(4, 4)
sprite_frames = SubResource("SpriteFrames_ycdy4")
animation = &"idle"

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(50.999985, -34)
script = ExtResource("12_82xsv")

[node name="ball" type="RigidBody2D" parent="."]
z_index = 1
position = Vector2(-129.00002, -47)
gravity_scale = 0.0
script = ExtResource("3_h2yge")

[node name="CollisionShape2D" type="CollisionShape2D" parent="ball"]
position = Vector2(0, -2)
scale = Vector2(0.15900171, 0.032534778)
shape = SubResource("RectangleShape2D_0xm2m")
debug_color = Color(0.8590914, 0.32324144, 0.4422981, 0.41960785)

[node name="Sprite2D" type="Sprite2D" parent="ball"]
texture_filter = 1
position = Vector2(0, -2.0000005)
scale = Vector2(2, 2)
texture = ExtResource("9_4c57u")

[node name="Bottom_Bounds" type="Area2D" parent="."]
z_index = 1
position = Vector2(-160.00002, -69)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Bottom_Bounds"]
position = Vector2(183, 803)
shape = SubResource("WorldBoundaryShape2D_0xm2m")

[node name="wall2" type="StaticBody2D" parent="."]
z_index = 1
position = Vector2(135.99998, 185)
script = ExtResource("4_7mycd")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="wall2"]
position = Vector2(-449, -217)
shape = SubResource("RectangleShape2D_efxa6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="wall2"]
position = Vector2(197, -197)
shape = SubResource("RectangleShape2D_efxa6")

[node name="wall" type="StaticBody2D" parent="."]
z_index = 1
position = Vector2(-12.000015, 58)
script = ExtResource("4_7mycd")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="wall"]
position = Vector2(203, -212)
shape = SubResource("RectangleShape2D_lquwl")

[node name="CollisionShape2D" type="CollisionShape2D" parent="wall"]
position = Vector2(286, 4)
shape = SubResource("RectangleShape2D_lquwl")

[node name="frame" type="CanvasGroup" parent="."]
z_index = 5
position = Vector2(-640, -13.000001)
scale = Vector2(5, 5)

[node name="frame4" type="Sprite2D" parent="frame"]
texture_filter = 1
position = Vector2(140.2, -61.4)
scale = Vector2(2.9703126, 0.99999994)
texture = ExtResource("9_kek77")
metadata/_edit_lock_ = true

[node name="frame3" type="Sprite2D" parent="frame"]
texture_filter = 1
position = Vector2(255.99998, -3.6000004)
scale = Vector2(1.1234376, 0.99999994)
texture = ExtResource("9_kek77")
metadata/_edit_lock_ = true

[node name="frame2" type="Sprite2D" parent="frame"]
texture_filter = 1
position = Vector2(140, 57.999992)
scale = Vector2(3.0765624, 0.99999994)
texture = ExtResource("9_kek77")
metadata/_edit_lock_ = true

[node name="frame" type="Sprite2D" parent="frame"]
texture_filter = 1
scale = Vector2(0.99999994, 0.99999994)
texture = ExtResource("9_kek77")
metadata/_edit_lock_ = true

[node name="bounds_p1" type="Area2D" parent="."]
position = Vector2(-303, -46)
scale = Vector2(1.6992211, 0.30259532)
script = ExtResource("17_074og")

[node name="CollisionShape2D" type="CollisionShape2D" parent="bounds_p1"]
position = Vector2(-4.5201035, 82.618576)
scale = Vector2(0.2886224, 6.892917)
shape = SubResource("RectangleShape2D_vivmo")

[node name="bounds_p2" type="Area2D" parent="."]
position = Vector2(-265, -77)
scale = Vector2(1.6992211, 0.30259532)
script = ExtResource("17_074og")

[node name="CollisionShape2D" type="CollisionShape2D" parent="bounds_p2"]
position = Vector2(331.91678, 128.88501)
scale = Vector2(0.2886224, 6.892917)
shape = SubResource("RectangleShape2D_vivmo")

[node name="Game" type="Node2D" parent="."]
position = Vector2(-160.00002, -69)
script = ExtResource("18_cegan")

[node name="lbl_p1score" type="Label" parent="."]
z_index = 5
offset_left = -176.0
offset_top = 82.0
offset_right = -136.0
offset_bottom = 105.0
text = "test"
script = ExtResource("20_getpj")

[node name="lbl_p2score" type="Label" parent="."]
z_index = 5
offset_left = 195.0
offset_top = 80.0
offset_right = 235.0
offset_bottom = 103.0
text = "test"
script = ExtResource("20_82xsv")

[node name="ray_area" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="ray_area"]
position = Vector2(15, -17.999998)
scale = Vector2(7.014038, 2.8655853)
polygon = PackedVector2Array(31.935955, -38.735542, 17.251118, 25.474724, -17.53626, 26.172663, 1.1405697, -38.386574)

[connection signal="moved" from="player2" to="Camera2D" method="_on_player_2_moved"]
[connection signal="moved" from="player" to="Camera2D" method="_on_player_1_moved"]
[connection signal="ball_entered" from="bounds_p1" to="Game" method="_on_bounds_p_1_ball_entered"]
[connection signal="ball_entered" from="bounds_p2" to="Game" method="_on_bounds_p_1_ball_entered"]
[connection signal="player_scored" from="Game" to="lbl_p1score" method="_on_game_player_scored"]
[connection signal="player_scored" from="Game" to="lbl_p2score" method="_on_game_player_scored"]
[connection signal="round_reset" from="Game" to="ball" method="_on_game_round_reset"]
[connection signal="area_shape_entered" from="ray_area" to="player" method="_on_ray_area_area_shape_entered"]
[connection signal="body_entered" from="ray_area" to="player" method="_on_ray_area_body_entered"]
